webpackJsonp([5],{272:function(t,e,n){"use strict";function a(t){u||n(812)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(762),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);var l=n(820),s=n.n(l),u=!1,p=n(4),d=a,c=p(o.a,s.a,!1,d,null,null);c.options.__file="src\\views\\customer\\common\\auth\\item.relation.group.vue",e.default=c.exports},343:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(30),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={name:"PopTipTransfer",props:{visible:{type:Boolean,default:!1},width:{type:Number,default:660},showBtn1:{type:Boolean,default:!0},showBtn2:{type:Boolean,default:!0},showCascader:{type:Boolean,default:!0},groupData:Array,targetItems:Array,listStyle:Object,operations:Array,placement:{type:String,default:function(){return"bottom"}},itemDefaultValue:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}},renderItem:{type:Function,default:function(t){return t.label||t.key}}},data:function(){return{itemValueCopy:JSON.parse((0,i.default)(this.itemDefaultValue)),visibleCopy:{value:this.visible}}},methods:{handleChange:function(t,e,n){this.$emit("handleChange",t,this.itemValueCopy,e,n)},onPopperShow:function(){this.$emit("onPopperShow",this.itemValueCopy),this.$emit("PopperToggle",this.visibleCopy)},onPopperHide:function(){this.$emit("PopperToggle",this.visibleCopy)},showAllData:function(){this.$emit("showAllData",this.itemValueCopy)},selectItemChange:function(t,e){this.$emit("selectItemChange",t,e)},showFilterData:function(){this.$emit("showFilterData",this.itemValueCopy)}}}},371:function(t,e,n){"use strict";function a(t){u||n(372)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(343),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);var l=n(374),s=n.n(l),u=!1,p=n(4),d=a,c=p(o.a,s.a,!1,d,null,null);c.options.__file="src\\views\\customer\\common\\auth\\component\\PopTipTransfer.vue",e.default=c.exports},372:function(t,e,n){var a=n(373);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(21)("0f938d50",a,!1)},373:function(t,e,n){e=t.exports=n(20)(!1),e.push([t.i,"\n.hide {\n    display: none !important;\n}\n",""])},374:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Poptip",{attrs:{placement:t.placement,width:t.width,transfer:""},on:{"on-popper-show":t.onPopperShow,"on-popper-hide":t.onPopperHide},model:{value:t.visibleCopy.value,callback:function(e){t.$set(t.visibleCopy,"value",e)},expression:"visibleCopy.value"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("Row",{attrs:{gutter:10}},[n("Col",{attrs:{span:"24"}},[n("Card",[t._t("head",[n("div",{staticStyle:{"padding-bottom":"15px"}},[n("Button",{class:{hide:!t.showBtn1},attrs:{type:"ghost"},on:{click:t.showFilterData}},[t._v("LoadFilter")]),t._v(" "),n("Button",{class:{hide:!t.showBtn2},attrs:{type:"ghost"},on:{click:t.showAllData}},[t._v("LoadAll")]),t._v(" "),n("Cascader",{class:{hide:!t.showCascader},staticStyle:{width:"250px",display:"inline-block"},attrs:{data:t.items},on:{"on-change":t.selectItemChange},model:{value:t.itemValueCopy,callback:function(e){t.itemValueCopy=e},expression:"itemValueCopy"}})],1)]),t._v(" "),n("Transfer",{attrs:{data:t.groupData,"target-keys":t.targetItems,"list-style":t.listStyle,"render-format":t.renderItem,operations:t.operations,filterable:""},on:{"on-change":t.handleChange}})],2)],1)],1)],1),t._v(" "),t._t("default")],2)},i=[];a._withStripped=!0;var o={render:a,staticRenderFns:i};e.default=o},762:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),o=a(i),r=n(116),l=a(r),s=n(115),u=a(s),p=n(42),d=a(p),c=n(814),h=a(c),f=n(113),m=a(f),v=n(68),g=a(v),y=n(818),_=a(y),b=n(371),x=a(b),w=n(5),I=a(w);I.default.component("PopTipTable",_.default),I.default.component("PopTipTransfer",x.default),e.default={name:"auth_role",components:{},data:function(){return{treeData:[],defaultScope:"",currentType:"",itemTypes:[{value:3,label:"角色",level:3,children:[{value:"admin_roles",label:"智慧云端角色"},{value:"school_roles",label:"学校端角色"},{value:"org_roles",label:"机构端角色"}]},{value:2,label:"菜单",level:2,children:[{value:"admin_menus",label:"智慧云端菜单"},{value:"admin_top_menus",label:"智慧云端顶部菜单"},{value:"school_menus",label:"学校端菜单"},{value:"org_menus",label:"机构端菜单"}]},{value:1,label:"权限",level:1,children:[{value:"admin_permissions",label:"智慧云端权限"},{value:"school_permissions",label:"学校端权限"},{value:"org_permissions",label:"机构端权限"}]}],columns:[{title:"菜单名称",key:"item_name"},{title:"菜单描述",key:"item_desc"}],dataItems:[],initDataItems:[],groupData:[],targetItems:[],defaultItemValue:[],listStyle:{width:"250px",height:"300px"},operations:["To left","To right"]}},methods:{initData:function(t){var e=this;void 0===t&&(t=this.itemTypes[0].value),this.treeData=[],this.currentItem={},g.default.all([this.axios.get("{{auth_host_v1}}/auth/item/relation/tree",{params:{type:t}})]).then(function(n){var a=(0,m.default)(n,1),i=a[0],o=[],r=!0,l=!1,s=void 0;try{for(var p,c=(0,d.default)(e.itemTypes.entries());!(r=(p=c.next()).done);r=!0){var f=p.value,v=(0,m.default)(f,2),g=v[0],y=v[1];if(y.value===t&&(e.currentItem=y,e.defaultItemValue=[e.currentItem.value-1>0?e.currentItem.value-1:1]),y.value===e.defaultItemValue[0]&&(e.defaultItemValue[1]=y.children[0].value),y.value===(0,u.default)(t)){var _=!0,b=!1,x=void 0;try{for(var w,I=(0,d.default)(y.children);!(_=(w=I.next()).done);_=!0){var C=w.value,T=e.topMenu(),S=!0,P=!1,D=void 0;try{for(var k,O=(0,d.default)(i.data.data);!(S=(k=O.next()).done);S=!0){var $=k.value;C.value===$.scope&&(T.children=$.data)}}catch(t){P=!0,D=t}finally{try{!S&&O.return&&O.return()}finally{if(P)throw D}}o[C.value]={data:[T],scope:C.value}}}catch(t){b=!0,x=t}finally{try{!_&&I.return&&I.return()}finally{if(b)throw x}}}(0,u.default)(t)===y.value&&e.$refs.treeGroups[g].$emit("on-click",{scope:e.itemTypes[g].children[0].value,type:t})}}catch(t){l=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}e.treeData=(0,h.default)(o)})},topMenu:function(){var t=this;return{title:"添加顶级节点",relation_id:0,expand:!0,render:function(e,n){var a=(n.root,n.node,n.data);return e("span",{style:{display:"inline-block",width:"100%"}},[e("span",[e("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px"}}),e("span",a.title)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("PopTipTable",{props:{data:t.dataItems,columns:t.columns,selectNode:a},on:{search:t.search,dbClick:t.store,"on-popper-show":function(){t.getItemOriginal(a)}}},[e("Button",{props:(0,l.default)({},t.buttonProps,{icon:"ios-plus-empty",type:"primary"}),style:{width:"184px"}})])])])}}},destroy:function(t,e,n){this.axios.post("{{auth_host_v1}}/auth/item/relation/tree/"+n.relation_id,{_method:"delete"}).then(function(a){if("0"===a.data.code){var i=t.find(function(t){return t===e}).parent,o=t.find(function(t){return t.nodeKey===i}).node,r=o.children.indexOf(n);o.children.splice(r,1)}})},search:function(t){var e=[],n=JSON.parse((0,o.default)(this.initDataItems));if(""===t)e=n;else{var a={item_name:t,item_desc:t};for(var i in a)if(a[i].length>0)for(var r in n)n[r][i].indexOf(a[i])>-1&&(e.push(n[r]),n.splice(r,1))}this.dataItems=e},store:function(t,e,n){var a=this;this.axios.post("{{auth_host_v1}}/auth/item/relation/"+n.relation_id,{id:t.id,scope:this.defaultScope}).then(function(t){if("0"===t.data.code){var e=n.children||[];e.push(t.data.data),a.$set(n,"children",e)}})},renderContent:function(t,e){var n=this,a=e.root,i=e.node,o=e.data,r="";return r=o.children?"ios-folder-outline":"ios-paper-outline",t("span",{style:{display:"inline-block",width:"100%"}},[t("span",[t("Icon",{props:{type:r},style:{marginRight:"8px"}}),t("span",o.item_name)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[t("PopTipTable",{props:{data:this.dataItems,columns:this.columns,selectNode:o},on:{search:this.search,dbClick:this.store,"on-popper-show":function(){n.getItemOriginal(o)}}},[t("Button",{style:{marginRight:"8px"}},"添加")]),t("Poptip",{props:{confirm:!0,title:"您确定要删除该节点(及以下节点)吗?",transfer:!0},on:{"on-ok":function(){n.destroy(a,i,o)}}},[t("Button",{style:{marginRight:"8px"}},"删除")]),t("PopTipTransfer",{props:{groupData:this.groupData,targetItems:this.targetItems,listStyle:this.listStyle,operations:this.operations,renderItem:this.renderItem,items:this.itemTypes,itemDefaultValue:this.defaultItemValue},on:{onPopperShow:function(t){n.loadGroupItems(t[0],t[1],o)},handleChange:function(t){n.handleChange(t,o)},showAllData:function(t){n.loadGroupItems(t[0],t[1],o,0)},showFilterData:function(t){n.loadGroupItems(t[0],t[1],o,1)},selectItemChange:function(t,e){n.loadGroupItems(t[0],t[1],o,1)}}},[t("Button","分配")])])])},loadItems:function(t){t instanceof Object||(t=JSON.parse(t)),this.defaultScope=t.scope,this.currentType=t.type},getItemOriginal:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dataItems=this.initDataItems=[],this.axios.get("{{auth_host_v1}}/auth/item/relation/original",{params:{scope:this.defaultScope,type:this.currentType,id:t.relation_id,filter:n}}).then(function(t){e.dataItems=e.initDataItems=t.data.data})},loadGroupItems:function(t,e,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.groupData=[],this.targetItems=[],g.default.all([this.axios.get("{{auth_host_v1}}/auth/item/group/original",{params:{id:n.id,type:this.currentType,filter:i,scope:this.defaultScope,returnScope:e,returnType:t}}),this.axios.get("{{auth_host_v1}}/auth/item/group/target",{params:{id:n.id}})]).then(function(t){var e=(0,m.default)(t,2),n=e[0],i=e[1];if(n.data.data.length>0){var o=!0,r=!1,l=void 0;try{for(var s,u=(0,d.default)(n.data.data);!(o=(s=u.next()).done);o=!0){var p=s.value;p.key=p.id,p.label=p.item_name}}catch(t){r=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw l}}}a.groupData=n.data.data,a.targetItems=i.data.data})},renderItem:function(t){return t.item_name+" - "+t.item_desc},handleChange:function(t,e){var n=this;this.axios.post("{{auth_host_v1}}/auth/item/group/"+e.id,{ids:t,scope:this.defaultScope}).then(function(e){"0"===e.data.code&&(n.targetItems=t)})},loadItemRelation:function(t){this.initData((0,u.default)(t))}},created:function(){this.initData()}}},763:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PopTipTable",props:{columns:Array,data:Array,selectNode:Object,placement:{type:String,default:"bottom"}},data:function(){return{searchContent:"",initData:[]}},methods:{handleSearch:function(){this.$emit("search",this.searchContent)},handleDbClick:function(t,e){this.$emit("dbClick",t,e,this.selectNode)},onPopperShow:function(){this.$emit("on-popper-show")}}}},812:function(t,e,n){var a=n(813);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(21)("04c2ac51",a,!1)},813:function(t,e,n){e=t.exports=n(20)(!1),e.push([t.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},814:function(t,e,n){t.exports={default:n(815),__esModule:!0}},815:function(t,e,n){n(816),t.exports=n(0).Object.values},816:function(t,e,n){var a=n(6),i=n(817)(!1);a(a.S,"Object",{values:function(t){return i(t)}})},817:function(t,e,n){var a=n(32),i=n(16),o=n(33).f;t.exports=function(t){return function(e){for(var n,r=i(e),l=a(r),s=l.length,u=0,p=[];s>u;)o.call(r,n=l[u++])&&p.push(t?[n,r[n]]:r[n]);return p}}},818:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(763),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(819),l=n.n(r),s=n(4),u=s(i.a,l.a,!1,null,null,null);u.options.__file="src\\views\\customer\\common\\auth\\component\\PopTipTable.vue",e.default=u.exports},819:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Poptip",{attrs:{placement:t.placement,width:"400"},on:{"on-popper-show":t.onPopperShow}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("Row",{attrs:{gutter:10}},[n("Col",{attrs:{span:"24"}},[n("Card",[n("Row",[n("Input",{staticStyle:{width:"300px"},attrs:{icon:"search",placeholder:"请输入节点名称搜索..."},on:{"on-change":t.handleSearch},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}})],1),t._v(" "),n("Row",{staticClass:"margin-top-10 searchable-table-con1"},[n("Scroll",{attrs:{height:"400"}},[n("Table",{attrs:{width:"330",columns:t.columns,data:t.data},on:{"on-row-dblclick":t.handleDbClick}})],1)],1)],1)],1)],1)],1),t._v(" "),t._t("default")],2)},i=[];a._withStripped=!0;var o={render:a,staticRenderFns:i};e.default=o},820:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(30),i=function(t){return t&&t.__esModule?t:{default:t}}(a),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"android-remove"}}),t._v("\n            菜单管理\n        ")],1),t._v(" "),n("div",[n("Tabs",{ref:"itemTypes",staticStyle:{height:"700px"},on:{"on-click":t.loadItemRelation}},t._l(t.itemTypes,function(e,a){return n("TabPane",{attrs:{label:e.label,name:""+e.value}},[n("Tabs",{ref:"treeGroups",refInFor:!0,staticStyle:{height:"700px"},on:{"on-click":t.loadItems}},t._l(e.children,function(a,o){return n("TabPane",{attrs:{label:a.label,name:(0,i.default)({scope:a.value,type:e.value})}},[n("Scroll",{attrs:{height:"400"}},t._l(t.treeData,function(e){return e.scope===a.value?n("Tree",{staticStyle:{width:"700px"},attrs:{data:e.data,render:t.renderContent}}):t._e()}))],1)}))],1)}))],1)])],1)},r=[];o._withStripped=!0;var l={render:o,staticRenderFns:r};e.default=l}});