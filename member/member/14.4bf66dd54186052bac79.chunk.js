webpackJsonp([14],{290:function(n,e,t){"use strict";function r(n){u||(t(897),t(901))}Object.defineProperty(e,"__esModule",{value:!0});var o=t(789),s=t.n(o);for(var a in o)"default"!==a&&function(n){t.d(e,n,function(){return o[n]})}(a);var i=t(903),l=t.n(i),u=!1,d=t(4),c=r,p=d(s.a,l.a,!1,c,null,null);p.options.__file="src\\views\\login.vue",e.default=p.exports},789:function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(31),s=r(o),a=t(10),i=r(a),l=t(23),u=r(l);e.default={data:function(){return{status:"school",status2:"org",codeText:"获取验证码",currentRef:"loginForm2",time:60,disabled:!1,form:{userName:"",password:""},rules:{userName:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},rules2:{userName:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{validator:function(n,e,t){""===e&&t();var r=/^1[0-9]{10}$/;null===e||r.test(e)?t():t(new Error("请输入正确格式的手机号"))}}],password:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},methods:{handleSubmit:function(){var n=this,e="";if("loginForm"===this.currentRef)if("school"===this.status)e="users";else if("org"===this.status)e="org_users";else{if("admin"!==this.status)return;e="admins"}else{if("loginForm2"!==this.currentRef)return;if("org"!==this.status2)return;e="org_users"}this.$refs[this.currentRef].validate(function(t){t&&(s.default.LoadingBar.start(),n.axios.post("{{auth_host_v1}}/admin/login",{username:n.form.userName,password:n.form.password,provider:e}).then(function(e){e.data.access_token&&(i.default.set("user",n.form.userName),u.default.loadMenu().then(function(n){s.default.LoadingBar.finish(),window.location.reload()}))}))})},getCode:function(){var n=this;this.$refs.loginForm2.validateField("userName",function(e){if(!e){n.codeText="请等待  "+n.time+"  秒",n.disabled=!0;var t=setInterval(function(){n.time--,n.codeText="请等待 "+n.time+" 秒",0===n.time&&(clearInterval(t),n.codeText="获取验证码",n.disabled=!1,n.time=60)},1e3);n.axios.post("{{auth_host_v1}}/sms/code",{tel:n.form.userName}).then(function(n){"0"===n.data.code&&o.Message.success("验证码发送成功")})}})},toggleTab:function(n){if(""===this.currentRef)return"loginForm2";this.currentRef=n}},computed:{}}},897:function(n,e,t){var r=t(898);"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t(21)("3b89b35e",r,!1)},898:function(n,e,t){var r=t(899);e=n.exports=t(20)(!1),e.push([n.i,"\n.login {\n  width: 100%;\n  height: 100%;\n  background-image: url("+r(t(900))+");\n  background-size: cover;\n  background-position: center;\n  position: relative;\n}\n.login-con {\n  position: absolute;\n  right: 160px;\n  top: 50%;\n  -webkit-transform: translateY(-60%);\n          transform: translateY(-60%);\n  width: 350px;\n}\n.login-con-header {\n  font-size: 16px;\n  font-weight: 300;\n  text-align: center;\n  padding: 30px 0;\n}\n.login-con .form-con {\n  padding: 10px 0 0;\n}\n.login-con .login-tip {\n  font-size: 10px;\n  text-align: center;\n  color: #c3c3c3;\n}\n",""])},899:function(n,e){n.exports=function(n){return"string"!=typeof n?n:(/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),/["'() \t\n]/.test(n)?'"'+n.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':n)}},900:function(n,e,t){n.exports=t.p+"3b3aaced7abfb5a36db3d08cdf5caf7f.jpg"},901:function(n,e,t){var r=t(902);"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t(21)("2824e34a",r,!1)},902:function(n,e,t){e=n.exports=t(20)(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},903:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"login",on:{keydown:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.handleSubmit(e)}}},[t("div",{staticClass:"login-con"},[t("Card",{attrs:{bordered:!1}},[t("p",{attrs:{slot:"title"},slot:"title"},[t("Icon",{attrs:{type:"log-in"}}),n._v("\n                欢迎登录\n            ")],1),n._v(" "),t("Tabs",{attrs:{value:"loginForm2"},on:{"on-click":n.toggleTab}},[t("TabPane",{attrs:{label:"短信登录",name:"loginForm2"}},[t("div",{staticClass:"form-con"},[t("Form",{ref:"loginForm2",attrs:{model:n.form,rules:n.rules2}},[t("FormItem",{attrs:{prop:"userName"}},[t("Input",{attrs:{placeholder:"请输入手机号码"},model:{value:n.form.userName,callback:function(e){n.$set(n.form,"userName",e)},expression:"form.userName"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:16,type:"person"}})],1)])],1),n._v(" "),t("FormItem",{attrs:{prop:"password"}},[t("Row",[t("Col",{attrs:{span:"15"}},[t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入验证码"},model:{value:n.form.password,callback:function(e){n.$set(n.form,"password",e)},expression:"form.password"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:14,type:"locked"}})],1)])],1)],1),n._v(" "),t("Col",{attrs:{push:"1",span:"7"}},[t("Button",{attrs:{disabled:n.disabled,type:"primary"},domProps:{textContent:n._s(n.codeText)},on:{click:n.getCode}})],1)],1)],1),n._v(" "),t("FormItem",{attrs:{label:""}},[t("RadioGroup",{model:{value:n.status2,callback:function(e){n.status2=e},expression:"status2"}},[t("Radio",{attrs:{label:"org"}},[n._v("机构端")])],1)],1),n._v(" "),t("FormItem",[t("Button",{attrs:{type:"primary",long:""},on:{click:n.handleSubmit}},[n._v("登录")])],1)],1)],1)]),n._v(" "),t("TabPane",{attrs:{label:"账号密码登录",name:"loginForm"}},[t("div",{staticClass:"form-con"},[t("Form",{ref:"loginForm",attrs:{model:n.form,rules:n.rules}},[t("FormItem",{attrs:{prop:"userName"}},[t("Input",{attrs:{placeholder:"请输入用户名"},model:{value:n.form.userName,callback:function(e){n.$set(n.form,"userName",e)},expression:"form.userName"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:16,type:"person"}})],1)])],1),n._v(" "),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:n.form.password,callback:function(e){n.$set(n.form,"password",e)},expression:"form.password"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:14,type:"locked"}})],1)])],1),n._v(" "),t("FormItem",{attrs:{label:""}},[t("RadioGroup",{model:{value:n.status,callback:function(e){n.status=e},expression:"status"}},[t("Radio",{attrs:{label:"school"}},[n._v("学校端")]),n._v(" "),t("Radio",{attrs:{label:"org"}},[n._v("机构端")]),n._v(" "),t("Radio",{attrs:{label:"admin"}},[n._v("管理员端")])],1)],1),n._v(" "),t("FormItem",[t("Button",{attrs:{type:"primary",long:""},on:{click:n.handleSubmit}},[n._v("登录")])],1)],1)],1)])],1)],1)],1)])},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.default=s}});